LIBFTPATH	= ./libft
LIBFT		= $(LIBFTPATH)/libft.a

SRCS		= push_swap.c \
			  ps_parser.c \
			  ps_validation.c \
			  ps_utils.c \
			  ps_utils2.c \
			  ps_rules.c \
			  ps_game.c \
			  ps_sorting.c \
			  ps_sorting2.c


#SOURCES		= $(addprefix $(SOURCES_DIR/, $(SRCS)))
OBJ			= $(SRCS:.c=.o)

NAME		= push_swap
CC			= clang -g
RM			= rm -f
CFLAGS		= -Wall -Wextra -Werror
LINKS		= -I $(LIBFTPATH) -L $(LIBFTPATH) -lft


all:		$(NAME)

$(NAME):	$(OBJ)
			make -C $(LIBFTPATH) all
			$(CC) $(CFLAGS) $(OBJ) -o $(NAME) $(LINKS)

.c.o:
			$(CC) -c $< -o $(<:.c=.o)

clean:
			$(RM) $(OBJ)
			make -C $(LIBFTPATH) clean

fclean:		clean
			make -C $(LIBFTPATH) fclean
			$(RM) $(NAME)

run:		$(OBJ)
			make -C $(LIBFTPATH) all
			$(CC) $(OBJ) -o $(NAME) $(LINKS) && ./$(NAME) 374 386 383 215 123 117 285 357 427 39 197 74 61 223 169 100 337 349 253 85 438 348 436 209 120 150 72 326 399 93 181 345 17 38 238 70 488 259 261 466 271 490 205 321 380 250 497 308 480 312 245 274 192 122 434 260 130 201 365 494 473 178 171 406 24 359 482 27 212 437 381 23 158 29 249 450 188 73 242 353 470 50 481 184 114 398 320 186 410 164 132 240 258 291 313 403 232 412 97 425 47 293 229 210 268 46 247 402 162 394 198 121 126 12 227 138 84 213 388 168 414 423 485 307 392 190 330 329 78 26 335 277 430 401 322 191 6 418 290 90 496 134 21 218 108 396 377 60 382 54 166 43 22 484 185 88 55 475 76 468 452 343 416 453 9 112 426 373 476 478 432 146 465 347 472 75 179 272 477 56 267 405 101 460 224 16 417 58 19 301 269 200 420 4 246 351 92 34 105 206 431 439 404 464 251 393 182 299 113 44 256 346 116 111 110 96 49 317 99 103 202 128 292 421 286 302 104 411 266 283 147 297 370 254 281 195 196 119 305 10 309 68 243 331 449 369 118 333 375 443 77 57 95 83 143 354 303 141 42 352 441 314 235 139 270 244 214 13 433 145 338 262 37 257 53 64 367 355 33 48 127 273 173 52 364 327 413 385 458 455 30 462 94 448 152 7 492 115 193 282 275 225 440 125 18 400 98 241 174 316 323 80 82 230 447 278 495 339 32 446 154 493 239 311 106 255 203 397 15 358 41 390 429 498 151 328 237 419 486 25 165 489 306 208 289 222 264 361 45 391 360 336 234 304 252 159 300 8 133 444 231 69 459 324 408 389 157 276 457 407 136 442 28 156 319 499 161 318 79 428 395 31 167 129 155 372 228 91 284 211 219 187 66 217 366 344 153 87 233 194 454 265 2 287 176 11 36 124 424 387 471 149 207 148 296 384 62 183 189 332 342 59 170 363 467 5 175 142 409 350 334 379 368 71 279 107 163 310 160 248 422 288 51 456 3 435 67 236 180 199 65 479 86 1 461 362 356 298 341 63 220 295 20 280 144 340 463 135 491 226 216 172 89 315 204 177 102 376 451 14 445 40 263 371 35 81 378 137 469 487 325 294 483 140 474 109 415 131 500 221
runv:		$(OBJ)
			make -C $(LIBFTPATH) all
			$(CC) $(OBJ) -o $(NAME) $(LINKS) && valgrind --leak-check=full --show-leak-kinds=all --track-origins=yes ./$(NAME) 50 49 48 47 46 45 44 43 42 41 40 39 38 37 36 35 34 33 32 31 30 29 28 27 26 25 24 23 22 21 20 19 18 17 16 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1

runs:		$(OBJ)
			make -C $(LIBFTPATH) all
			$(CC) -fsanitize=address $(OBJ) -o $(NAME) $(LINKS) && ./$(NAME) 10 9 8 7 6 5 4 3 2 1

runc:
			./push_swap $ARG | ./checker_linux $ARG

rundebug:	$(OBJ)
			make -C $(LIBFTPATH) all
			clang push_swap.o ps_parser.o ps_validation.o ps_utils.o ps_utils2.o ps_rules.o ps_game.o ps_sorting.o ps_sorting2.o -o push_swap -I ./libft -L ./libft -lft -D DEBUG && ./push_swap 10 9 8 7 6 5 4 3 2 1

re:			fclean all

.PHONY:		all clean fclean re run libft libftpath
